<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AG Grid URL Sync - Basic Example</title>
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/dist/ag-grid-community.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/styles/ag-grid.min.css"
      rel="stylesheet"
    />
    <script type="module">
      import { createUrlSync } from '../dist/index.js'
      import {
        simpleData,
        simpleColumnDefs,
        defaultColDef
      } from '../shared-data.js'

      // Grid options
      const gridOptions = {
        columnDefs: simpleColumnDefs,
        rowData: simpleData,
        defaultColDef: {
          ...defaultColDef,
          filter: true
        }
      }

      // Initialize grid
      document.addEventListener('DOMContentLoaded', () => {
        const gridDiv = document.querySelector('#myGrid')
        const gridApi = agGrid.createGrid(gridDiv, gridOptions)

        // Initialize URL sync
        const urlSync = createUrlSync(gridApi)

        // Add event listeners for demo buttons
        document.querySelector('#generateUrl').addEventListener('click', () => {
          const url = urlSync.generateUrl()
          document.querySelector('#urlDisplay').textContent = url
        })

        document.querySelector('#applyUrl').addEventListener('click', () => {
          const url = document.querySelector('#urlInput').value
          urlSync.applyFromUrl(url)
        })

        document
          .querySelector('#clearFilters')
          .addEventListener('click', () => {
            urlSync.clearFilters()
            document.querySelector('#urlDisplay').textContent =
              window.location.href
          })

        // Apply filters from URL on load
        urlSync.applyFromUrl()
      })
    </script>
    <style>
      .container {
        max-width: 1200px;
        margin: 20px auto;
        padding: 0 20px;
      }
      .controls {
        margin-bottom: 20px;
      }
      .controls > * {
        margin: 5px;
      }
      #myGrid {
        height: 400px;
        width: 100%;
      }
      #urlDisplay {
        word-break: break-all;
        margin: 10px 0;
        padding: 10px;
        background: #f5f5f5;
        border-radius: 4px;
      }
      input[type='text'] {
        width: 100%;
        padding: 8px;
        margin: 5px 0;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
      button {
        padding: 8px 16px;
        background: #2196f3;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      button:hover {
        background: #1976d2;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>AG Grid URL Sync - Basic Example</h1>

      <div class="controls">
        <button id="generateUrl">Generate URL</button>
        <button id="clearFilters">Clear Filters</button>
      </div>

      <div id="urlDisplay"></div>

      <div class="controls">
        <input type="text" id="urlInput" placeholder="Paste URL here" />
        <button id="applyUrl">Apply URL</button>
      </div>

      <div id="myGrid" class="ag-theme-alpine"></div>
    </div>
  </body>
</html>
